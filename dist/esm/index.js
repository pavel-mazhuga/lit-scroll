function e(e,t,n){return(1-n)*e+n*t}function t(){return/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent)}var n;const o={ease:.1,mobile:!0},i={native:!1};let r=t();const l=(null===(n=null===CSS||void 0===CSS?void 0:CSS.supports)||void 0===n?void 0:n.call(CSS,"content-visibility","auto"))||!1;export default function(n={}){const s=document.documentElement,{body:c}=document,a=c.querySelector('[data-lit-scroll="wrapper"]');if(!a)throw new Error("[lit-scroll] Wrapper element not found.");const u=c.querySelector('[data-lit-scroll="container"]');if(!u)throw new Error("[lit-scroll] Container element not found.");const d=Array.from(u.querySelectorAll('a, button, select, input, [tabindex="0"]'));let f=!1,v=!0,m=0;const h=new Set,y=Object.assign(Object.assign({},o),n);let p,w=0,b=null,g=0,E=w,S=0;const L=Array.from(u.querySelectorAll('[data-lit-scroll="section"]')),x="IntersectionObserver"in window?new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target;l?t.style.contentVisibility=e.isIntersecting?"":"auto":t.style.visibility=e.isIntersecting?"":"hidden"})},{rootMargin:"100px 0px"}):null;function C(e){e.preventDefault()}function A(){w=window.pageYOffset||s.scrollTop}function O(){u.style.transform=`matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,0,${-E},0,1)`}function z(){v&&(E=w),(!r||r&&y.mobile)&&O()}function V(){g=u.scrollHeight}function q(){c.style.height=g+"px"}function I(){c.style.height=""}function B(){s.classList.remove("lit-scroll-initialized")}function R(){a.style.position="",a.style.width="",a.style.height="",a.style.top="",a.style.left="",a.style.overflow=""}function T(){u.style.transform="",window.scrollTo({top:w,behavior:"auto"})}function j(){r=t(),$(),A(),z(),V(),(!r||r&&y.mobile)&&q()}function F(){L.forEach(e=>{e.style.contentVisibility="",e.style.containIntrinsicSize="";const t=e.getBoundingClientRect();e.style.containIntrinsicSize=`1px ${t.height}px`}),V(),(!r||r&&y.mobile)&&q()}function P(){M(this)}function H(){if("number"==typeof b){const t=e(E,b,y.ease);E=t,window.scrollTo({top:E})}else{const t=e(E,w,y.ease);S=t-E,E=t>.5?t:w}Math.abs(E-w)>.5?h.forEach(([e,t])=>{"scroll"===e&&t({docScrollValue:w,scrollValue:E,maxHeight:g,speed:S})}):b=null,(!r||r&&y.mobile)&&O(),m=requestAnimationFrame(H)}const M=(e,t={})=>{var n,o;const l=Object.assign(Object.assign({},i),t);let s=null;if("number"==typeof e&&(s=e),"string"==typeof e){const t=document.querySelector(e);t&&(s=E+t.getBoundingClientRect().top)}return e instanceof Element&&(s=E+e.getBoundingClientRect().top),"number"==typeof s&&(l.native&&(null===(o=null===(n=window.CSS)||void 0===n?void 0:n.supports)||void 0===o?void 0:o.call(n,"scroll-behavior","smooth"))||r&&!y.mobile?window.scrollTo({top:s,behavior:"smooth"}):b=s),s};function W(){h.forEach(([,e])=>{e({docScrollValue:w,scrollValue:w,maxHeight:g,speed:S})}),E=w}function $(){!r||r&&y.mobile?f||(m=requestAnimationFrame(H),q(),s.classList.add("lit-scroll-initialized"),a.style.position="fixed",a.style.width="100%",a.style.height="100%",a.style.top="0",a.style.left="0",a.style.overflow="hidden",document.removeEventListener("scroll",W),f=!0):f&&(cancelAnimationFrame(m),I(),R(),B(),T(),document.addEventListener("scroll",W,{passive:!1}),f=!1)}return A(),V(),window.addEventListener("resize",j),window.addEventListener("scroll",A),d.forEach(e=>{e.addEventListener("focus",P)}),window.ResizeObserver&&(p=new ResizeObserver(e=>{e.forEach(F)}),p.observe(u)),x&&L.forEach(e=>{x.observe(e)}),z(),$(),{destroy:function(){cancelAnimationFrame(m),p&&p.disconnect(),window.removeEventListener("resize",j),window.removeEventListener("scroll",A),d.forEach(e=>{e.removeEventListener("focus",P)}),x&&x.disconnect(),h.clear(),I(),R(),B(),T(),document.removeEventListener("scroll",W),f=!1},getCurrentValue:function(){return w},getCurrentLerpValue:function(){return E},getSpeed:function(){return S},on:(e,t)=>{h.add([e,t])},off:(e,t)=>{h.delete([e,t])},scrollTo:M,enable:function(){v=!0,u.removeEventListener("wheel",C),u.removeEventListener("touchmove",C)},disable:function(){v=!1,u.addEventListener("wheel",C,{passive:!1}),u.addEventListener("touchmove",C,{passive:!1})},isEnabled:function(){return v}}}
