function e(e,t,n){return(1-n)*e+n*t}function t(){return/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent)}const n={ease:.1,mobile:!0},o={native:!1};let i=t();export default function(r={}){const l=document.documentElement,{body:s}=document,c=s.querySelector('[data-lit-scroll="wrapper"]');if(!c)throw new Error("[lit-scroll] Wrapper element not found.");const a=s.querySelector('[data-lit-scroll="container"]');if(!a)throw new Error("[lit-scroll] Container element not found.");const u=Array.from(a.querySelectorAll('a, button, select, input, [tabindex="0"]'));let d=!1,f=!0,m=0;const v=new Set,w=Object.assign(Object.assign({},n),r);let h,p=0,b=null,y=0,g=p,E=0;const L=Array.from(a.querySelectorAll('[data-lit-scroll="section"]')),S="IntersectionObserver"in window?new IntersectionObserver(e=>{e.forEach(e=>{e.target.style.visibility=e.isIntersecting?"":"hidden"})},{rootMargin:"100px 0px"}):null;function A(e){e.preventDefault()}function O(){p=window.pageYOffset||l.scrollTop}function x(){a.style.transform=`translate3d(0,${-g}px,0)`}function q(){f&&(g=p),(!i||i&&w.mobile)&&x()}function z(){y=a.scrollHeight}function C(){s.style.height=y+"px"}function V(){s.style.height=""}function T(){l.classList.remove("lit-scroll-initialized")}function j(){c.style.position="",c.style.width="",c.style.height="",c.style.top="",c.style.left="",c.style.overflow=""}function B(){a.style.transform="",window.scrollTo({top:p,behavior:"auto"})}function F(){i=t(),W(),O(),q(),z(),(!i||i&&w.mobile)&&C()}function P(){z(),(!i||i&&w.mobile)&&C()}function R(){I(this)}function H(){if("number"==typeof b){const t=e(g,b,w.ease);g=t,window.scrollTo({top:g})}else{const t=e(g,p,w.ease);E=t-g,g=t>.5?t:p}Math.abs(g-p)>.5?v.forEach(([e,t])=>{"scroll"===e&&t({docScrollValue:p,scrollValue:g,maxHeight:y,speed:E})}):b=null,(!i||i&&w.mobile)&&x(),m=requestAnimationFrame(H)}const I=(e,t={})=>{var n,r;const l=Object.assign(Object.assign({},o),t);let s=null;if("number"==typeof e&&(s=e),"string"==typeof e){const t=document.querySelector(e);t&&(s=g+t.getBoundingClientRect().top)}return e instanceof Element&&(s=g+e.getBoundingClientRect().top),"number"==typeof s&&(l.native&&(null===(r=null===(n=window.CSS)||void 0===n?void 0:n.supports)||void 0===r?void 0:r.call(n,"scroll-behavior","smooth"))||i&&!w.mobile?window.scrollTo({top:s,behavior:"smooth"}):b=s),s};function M(){v.forEach(([,e])=>{e({docScrollValue:p,scrollValue:p,maxHeight:y,speed:E})}),g=p}function W(){!i||i&&w.mobile?d||(m=requestAnimationFrame(H),C(),l.classList.add("lit-scroll-initialized"),c.style.position="fixed",c.style.width="100%",c.style.height="100%",c.style.top="0",c.style.left="0",c.style.overflow="hidden",document.removeEventListener("scroll",M),d=!0):d&&(cancelAnimationFrame(m),V(),j(),T(),B(),document.addEventListener("scroll",M,{passive:!1}),d=!1)}return O(),z(),window.addEventListener("resize",F),window.addEventListener("scroll",O),u.forEach(e=>{e.addEventListener("focus",R)}),window.ResizeObserver&&(h=new ResizeObserver(e=>{e.forEach(P)}),h.observe(a)),S&&L.forEach(e=>S.observe(e)),q(),W(),{destroy:function(){cancelAnimationFrame(m),h&&h.disconnect(),window.removeEventListener("resize",F),window.removeEventListener("scroll",O),u.forEach(e=>{e.removeEventListener("focus",R)}),S&&S.disconnect(),v.clear(),V(),j(),T(),B(),document.removeEventListener("scroll",M),d=!1},getCurrentValue:function(){return p},getCurrentLerpValue:function(){return g},getSpeed:function(){return E},on:(e,t)=>{v.add([e,t])},off:(e,t)=>{v.delete([e,t])},scrollTo:I,enable:function(){f=!0,a.removeEventListener("wheel",A),a.removeEventListener("touchmove",A)},disable:function(){f=!1,a.addEventListener("wheel",A,{passive:!1}),a.addEventListener("touchmove",A,{passive:!1})},isEnabled:function(){return f}}}
