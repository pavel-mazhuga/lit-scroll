function e(e,t,n){return(1-n)*e+n*t}function t(){return/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent)}const n={ease:.1,mobile:!0},o={native:!1};let i=t();export default function(r={}){const l=document.documentElement,{body:s}=document,c=s.querySelector('[data-lit-scroll="wrapper"]');if(!c)throw new Error("[lit-scroll] Wrapper element not found.");const a=s.querySelector('[data-lit-scroll="container"]');if(!a)throw new Error("[lit-scroll] Container element not found.");const u=Array.from(a.querySelectorAll('a, button, select, input, [tabindex="0"]'));let d=!1,f=!0,v=0;const m=new Set,h=Object.assign(Object.assign({},n),r);let w,y=0,p=null,b=0,g=y,E=0;const S=Array.from(a.querySelectorAll('[data-lit-scroll="section"]')),L="IntersectionObserver"in window?new IntersectionObserver(e=>{e.forEach(e=>{var t;const n=e.target;(null===(t=null===CSS||void 0===CSS?void 0:CSS.supports)||void 0===t?void 0:t.call(CSS,"content-visibility","auto"))?n.style.contentVisibility=e.isIntersecting?"":"hidden":n.style.visibility=e.isIntersecting?"":"hidden"})},{rootMargin:"100px 0px"}):null;function x(e){e.preventDefault()}function C(){y=window.pageYOffset||l.scrollTop}function A(){a.style.transform=`matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,0,${-g},0,1)`}function O(){f&&(g=y),(!i||i&&h.mobile)&&A()}function V(){b=a.scrollHeight}function z(){s.style.height=b+"px"}function q(){s.style.height=""}function I(){l.classList.remove("lit-scroll-initialized")}function B(){c.style.position="",c.style.width="",c.style.height="",c.style.top="",c.style.left="",c.style.overflow=""}function R(){a.style.transform="",window.scrollTo({top:y,behavior:"auto"})}function T(){i=t(),k(),C(),O(),V(),(!i||i&&h.mobile)&&z()}function j(){S.forEach(e=>{e.style.contentVisibility="",e.style.containIntrinsicSize="";const t=e.getBoundingClientRect();e.style.containIntrinsicSize=`1px ${t.height}px`}),V(),(!i||i&&h.mobile)&&z()}function F(){this.scrollIntoView({block:"center",inline:"center",behavior:"auto"})}function P(){if("number"==typeof p){const t=e(g,p,h.ease);g=t,window.scrollTo({top:g})}else{const t=e(g,y,h.ease);E=t-g,g=t>.5?t:y}Math.abs(g-y)>.5?m.forEach(([e,t])=>{"scroll"===e&&t({docScrollValue:y,scrollValue:g,maxHeight:b,speed:E})}):p=null,(!i||i&&h.mobile)&&A(),v=requestAnimationFrame(P)}function H(){m.forEach(([,e])=>{e({docScrollValue:y,scrollValue:y,maxHeight:b,speed:E})}),g=y}function k(){!i||i&&h.mobile?d||(v=requestAnimationFrame(P),z(),l.classList.add("lit-scroll-initialized"),c.style.position="fixed",c.style.width="100%",c.style.height="100%",c.style.top="0",c.style.left="0",c.style.overflow="hidden",document.removeEventListener("scroll",H),d=!0):d&&(cancelAnimationFrame(v),q(),B(),I(),R(),document.addEventListener("scroll",H,{passive:!1}),d=!1)}return C(),V(),window.addEventListener("resize",T),window.addEventListener("scroll",C),u.forEach(e=>{e.addEventListener("focus",F)}),window.ResizeObserver&&(w=new ResizeObserver(e=>{e.forEach(j)}),w.observe(a)),L&&S.forEach(e=>{L.observe(e)}),O(),k(),{destroy:function(){cancelAnimationFrame(v),w&&w.disconnect(),window.removeEventListener("resize",T),window.removeEventListener("scroll",C),u.forEach(e=>{e.removeEventListener("focus",F)}),L&&L.disconnect(),m.clear(),q(),B(),I(),R(),document.removeEventListener("scroll",H),d=!1},getCurrentValue:function(){return y},getCurrentLerpValue:function(){return g},getSpeed:function(){return E},on:(e,t)=>{m.add([e,t])},off:(e,t)=>{m.delete([e,t])},scrollTo:(e,t={})=>{var n,r;const l=Object.assign(Object.assign({},o),t);let s=null;if("number"==typeof e&&(s=e),"string"==typeof e){const t=document.querySelector(e);t&&(s=g+t.getBoundingClientRect().top)}return e instanceof Element&&(s=g+e.getBoundingClientRect().top),"number"==typeof s&&(l.native&&(null===(r=null===(n=window.CSS)||void 0===n?void 0:n.supports)||void 0===r?void 0:r.call(n,"scroll-behavior","smooth"))||i&&!h.mobile?window.scrollTo({top:s,behavior:"smooth"}):p=s),s},enable:function(){f=!0,a.removeEventListener("wheel",x),a.removeEventListener("touchmove",x)},disable:function(){f=!1,a.addEventListener("wheel",x,{passive:!1}),a.addEventListener("touchmove",x,{passive:!1})},isEnabled:function(){return f}}}
