function e(e,t,o){return(1-o)*e+o*t}function t(){return/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent)}const o={ease:.1,mobile:!0};let n=t();export default function(l={}){const i=document.documentElement,{body:r}=document,s=r.querySelector('[data-lit-scroll="wrapper"]'),c=r.querySelector('[data-lit-scroll="container"]'),a={native:!1};let u=!1;if(!s)throw new Error("[lit-scroll] Wrapper element not found.");if(!c)throw new Error("[lit-scroll] Container element not found.");let d=0;const f=new Set,m=Object.assign(Object.assign({},o),l);let w,v=0,h=null,y=0,p=0;function b(){v=window.pageYOffset||i.scrollTop}function g(){c.style.transform=`translate3d(0,${-1*p}px,0)`}function E(){p=v,(!n||n&&m.mobile)&&g()}function L(){y=c.scrollHeight}function S(){r.style.height=y+"px"}function O(){r.style.height=""}function x(){i.classList.remove("lit-scroll-initialized")}function z(){s.style.position="",s.style.width="",s.style.height="",s.style.top="",s.style.left="",s.style.overflow=""}function A(){c.style.transform="",window.scrollTo({top:v,behavior:"auto"})}function q(){n=t(),j(),b(),E(),L(),(!n||n&&m.mobile)&&S()}function C(){L(),(!n||n&&m.mobile)&&S()}function T(){if("number"==typeof h){const t=e(p,h,m.ease);p=t,window.scrollTo({top:p})}else{const t=e(p,v,m.ease);p=t>.5?t:v}Math.abs(p-v)>.5?f.forEach(([e,t])=>{"scroll"===e&&t({docScrollValue:v,scrollValue:p,maxHeight:y})}):h=null,(!n||n&&m.mobile)&&g(),d=requestAnimationFrame(T)}function V(){f.forEach(([,e])=>{e({docScrollValue:v,scrollValue:v,maxHeight:y})}),p=v}function j(){!n||n&&m.mobile?u||(d=requestAnimationFrame(T),S(),i.classList.add("lit-scroll-initialized"),s.style.position="fixed",s.style.width="100%",s.style.height="100%",s.style.top="0",s.style.left="0",s.style.overflow="hidden",document.removeEventListener("scroll",V),u=!0):(u&&(cancelAnimationFrame(d),O(),z(),x(),A(),u=!1),document.addEventListener("scroll",V))}return b(),L(),window.addEventListener("resize",q),window.addEventListener("scroll",b),window.ResizeObserver&&(w=new ResizeObserver(e=>{e.forEach(C)}),w.observe(c)),E(),j(),{destroy:function(){cancelAnimationFrame(d),w&&w.disconnect(),window.removeEventListener("resize",q),window.removeEventListener("scroll",b),f.clear(),O(),z(),x(),A(),document.removeEventListener("scroll",V),u=!1},getCurrentValue:function(){return v},on:(e,t)=>{f.add([e,t])},off:(e,t)=>{f.delete([e,t])},scrollTo:(e,t={})=>{var o,l;const i=Object.assign(Object.assign({},a),t);let r=null;if("number"==typeof e&&(r=e),"string"==typeof e){const t=document.querySelector(e);t&&(r=v+t.getBoundingClientRect().top)}return e instanceof Element&&(r=v+e.getBoundingClientRect().top),"number"==typeof r&&(i.native&&(null===(l=null===(o=window.CSS)||void 0===o?void 0:o.supports)||void 0===l?void 0:l.call(o,"scroll-behavior","smooth"))||n&&!m.mobile?window.scrollTo({top:r,behavior:"smooth"}):h=r),r}}}
